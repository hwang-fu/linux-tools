<!-- * * * * * * * * * * * * * * -->
<style>
    table {
        border-collapse: collapse;
        width: 100%;
        font-family: system-ui, sans-serif;
        font-size: 14px;
    }

    th {
        background-color: #f5f5f5;
        text-align: left;
        font-weight: 600;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px 12px;
    }

    tr:nth-child(even) {
        background-color: #fafafa;
    }

    tr:hover {
        background-color: #f0f8ff;
    }

    .hl-red {
        background-color: red;
    }

    .hl-green {
        background-color: green;
    }

    .hl-blue {
        background-color: blue;
    }

    .hl-yellow {
        background-color: yellow;
    }

    .hl-red-bg {
        background-color: red;
    }

    .hl-green-bg {
        background-color: green;
    }

    .hl-blue-bg {
        background-color: blue;
    }

    .hl-yellow-bg {
        background-color: yellow;
    }

    .hl-red-fg {
        color: red;
    }

    .hl-green-fg {
        color: green;
    }

    .hl-blue-fg {
        color: blue;
    }

    .hl-yellow-fg {
        color: yellow;
    }

    .hl-purple-fg {
        color: purple;
    }

    .red-underline {
        text-decoration-line: underline;
        text-decoration-color: red;
        text-decoration-thickness: 2px;
        text-underline-offset: 2px;
    }

    body {
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", "Times New Roman", Georgia, serif;
    }

    table {
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", serif;
    }

    ul > li {
        list-style-type: disc;
    }

    code {
        color: #24292e;
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: .375rem;
        padding: .15rem .35rem;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.875rem;
        line-height: 1.4;
        font-variant-ligatures: contextual;
    }


    pre {
        margin: 1rem 0;
        padding: .8rem 1rem;
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: .5rem;
        overflow: auto;
        tab-size: 4;
    }


    pre code {
        display: block;
        padding: 0;
        background: transparent;
        border: 0;
        color: #24292e;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.875rem;
        line-height: 1.5;
        white-space: pre;
    }
</style>
<!-- * * * * * * * * * * * * * * -->



<!-- * * * * * * * * * * * * * * -->
<script>
</script>
<!-- * * * * * * * * * * * * * * -->


<hr/>
<h1>Vim / Neovim Commands</h1>
<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3>Command <u>:substitute</u> (<u>:s</u>)</h3>
<ol>
    <li>Basic syntax: <code>:[range]s/{pattern}/{replace}/[flags] [count]</code></li>
    <br/>
    <ul>
        <li><b><i>range</i></b>: where to apply.</li>
        <ol>
            <br/>
            <li><code>no specifier</code>: current line.</li>
            <br/>
            <li><code>.</code>: current line.</li>
            <br/>
            <li><code>$</code>: last line.</li>
            <br/>
            <li><code>line1,line2</code>: range from <i>line1</i> to <i>line2</i>, both inclusive, first line is indexed 1 not 0.</li>
            <br/>
            <li><code>%</code>: whole file.</li>
            <br/>
            <li><code>1,$</code>: whole file.</li>
            <br/>
            <li><code>.,$</code>: from current line to the end.</li>
            <br/>
            <li><code>'&lt;,'&gt;</code>: visual selection (start / end).</li>
            <br/>
            <li><code>line+N</code>: <i>N</i> lines after <i>line</i>.</li>
            <br/>
            <li><code>line-N</code>: <i>N</i> lines before <i>line</i>.</li>
            <br/>
        </ol>
        <br/>
        <li><b><i>pattern</i></b>: regex to find.</li>
        <ol>
            <br/>
            <li><code>\&lt;</code> and <code>\&gt;</code>: word boundaries.</li>
            <br/>
            <li><code>^word</code>: start with <i>word</i>.</li>
            <br/>
            <li><code>word$</code>: end with <i>word</i>.</li>
            <br/>
            <li><code>.</code>: match exactly one character except newline.</li>
            <br/>
            <li><code>.*</code>: greedy match.</li>
            <br/>
            <li><code>.\{-}</code>: non-greedy match.</li>
            <br/>
            <li><code>\_.</code>: match exactly one character including newline.</li>
            <br/>
            <li><code>\</code>: escape special character.</li>
            <br/>
            <li><code>\n</code>: match newline.</li>
            <br/>
            <li><code>\(&lt;content&gt;\)</code>: match a group.</li>
            <br/>
        </ol>
        <br/>
        <li><b><i>replace</i></b>: what to replace.</li>
        <ol>
            <br/>
            <li><code>\r</code>: newline.</li>
            <br/>
            <li><code>\t</code>: tab.</li>
            <br/>
        </ol>
        <br/>
        <li><b><i>flags</i></b>: behaviors.</li>
        <ol>
            <br/>
            <li><code>g</code>: replace all matches per line.</li>
            <br/>
            <li><code>c</code>: confirm each substitution.</li>
            <br/>
            <li><code>i</code>: case-insensitive mode.</li>
            <br/>
            <li><code>I</code>: case-sensitive mode.</li>
            <br/>
            <li><code>n</code>: no change, only highlight.</li>
            <br/>
            <li><code>e</code>: no error if nothing found.</li>
            <br/>
        </ol>
        <br/>
        <li><b><i>count</i></b>: max subs per line (rarely used).</li>
        <br/>
    </ul>
    <br/>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3>Vim Commands on Files</h3>
<ol>
    <li>Commonly used ones:</li>
    <br/>
    <table>
        <thead>
            <tr>
                <th>Symbol</th>
                <th>Meaning</th>
                <th>Example</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>%</code></td>
                <td>The current file name</td>
                <td><code>:! echo %</code> or <code>:echo expand('%')</code> gets <i>main.c</i></td>
            </tr>
            <tr>
                <td><code>%:p</code></td>
                <td>Full absolute path of the current file</td>
                <td><code>:! echo %:p</code> or <code>:echo expand('%:p')</code> gets <i>/home/user/proj/src/main.c</i></td>
            </tr>
            <tr>
                <td><code>%:p:h</code></td>
                <td>Directory (head) of the current file</td>
                <td><code>:! echo %:p:h</code> or <code>:echo expand('%:p:h')</code> gets <i>/home/user/proj/src</i></td>
            </tr>
            <tr>
                <td><code>%:t</code></td>
                <td>Tail (basename only)</td>
                <td><code>:! echo %:t</code> or <code>:echo expand('%:t')</code> gets <i>main.c</i></td>
            </tr>
            <tr>
                <td><code>%:r</code></td>
                <td>Root (filename without extension)</td>
                <td><code>:! echo %:r</code> or <code>:echo expand('%:r')</code> gets <i>main</i></td>
            </tr>
            <tr>
                <td><code>%:e</code></td>
                <td>Extension name only</td>
                <td><code>:! echo %:e</code> or <code>:echo expand('%:e')</code> gets <i>c</i></td>
            </tr>
        </tbody>
    </table>
    <br/>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3>Using External <u>sed</u> in Vim</h3>
<ol>
    <li>Basic syntax: <code>:[range]!sed 's/{pattern}/{replace}/{flags}'</code></li>
    <br/>
    <ul>
        <li><b><i>range</i></b>: which lines to filter through sed.</li>
        <ol>
            <br/>
            <li><code>.</code>: current line only.</li>
            <br/>
            <li><code>%</code>: entire file (most common).</li>
            <br/>
            <li><code>'&lt;,'&gt;</code>: visual selection.</li>
            <br/>
            <li><code>1,10</code>: lines 1 through 10.</li>
            <br/>
            <li><code>.,$</code>: current line to end of file.</li>
            <br/>
        </ol>
        <br/>
        <li><b>Key differences from Vim's <code>:s</code></b>:</li>
        <ol>
            <br/>
            <li>Spawns external process (slower).</li>
            <br/>
            <li>Replaces buffer content with sed output.</li>
            <br/>
            <li>Uses sed regex syntax (slightly different from Vim).</li>
            <br/>
            <li>No access to Vim registers or special features.</li>
            <br/>
            <li>Single undo operation for entire filter.</li>
            <br/>
        </ol>
        <br/>
    </ul>
    <br/>
    <li>Common use cases:</li>
    <br/>
    <table>
        <thead>
            <tr>
                <th>Task</th>
                <th>Vim Command</th>
                <th>Equivalent Native Vim</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Simple substitution</td>
                <td><code>:%!sed 's/foo/bar/g'</code></td>
                <td><code>:%s/foo/bar/g</code> (faster)</td>
            </tr>
            <tr>
                <td>Delete empty lines</td>
                <td><code>:%!sed '/^$/d'</code></td>
                <td><code>:g/^$/d</code> (better)</td>
            </tr>
            <tr>
                <td>Delete lines with pattern</td>
                <td><code>:%!sed '/pattern/d'</code></td>
                <td><code>:g/pattern/d</code></td>
            </tr>
            <tr>
                <td>Print specific lines</td>
                <td><code>:%!sed -n '5,10p'</code></td>
                <td><code>:5,10</code> (view only)</td>
            </tr>
            <tr>
                <td>Insert line before match</td>
                <td><code>:%!sed '/pattern/i\New line'</code></td>
                <td><code>:g/pattern/norm! ONew line</code></td>
            </tr>
            <tr>
                <td>Append line after match</td>
                <td><code>:%!sed '/pattern/a\New line'</code></td>
                <td><code>:g/pattern/norm! oNew line</code></td>
            </tr>
            <tr>
                <td>Multiple operations</td>
                <td><code>:%!sed 's/a/A/g; s/b/B/g'</code></td>
                <td><code>:%s/a/A/g | %s/b/B/g</code></td>
            </tr>
            <tr>
                <td>Case conversion (uppercase)</td>
                <td><code>:%!sed 's/.*/\U&amp;/'</code></td>
                <td><code>:% norm! gUU</code> or <code>:%s/.*/\U&amp;/</code></td>
            </tr>
        </tbody>
    </table>
    <br/>
    <li>Advanced sed patterns:</li>
    <br/>
    <ul>
        <li><b>Regex differences from Vim:</b></li>
        <ol>
            <br/>
            <li><code>\+</code>: one or more (in basic sed, or use <code>sed -E</code> for <code>+</code>).</li>
            <br/>
            <li><code>\?</code>: zero or one (in basic sed, or use <code>sed -E</code> for <code>?</code>).</li>
            <br/>
            <li><code>\|</code>: alternation (in basic sed, or use <code>sed -E</code> for <code>|</code>).</li>
            <br/>
            <li><code>\( \)</code>: capture groups (always escaped in basic sed).</li>
            <br/>
            <li><code>&amp;</code>: reference the entire match in replacement.</li>
            <br/>
            <li><code>\1, \2</code>: backreferences (same as Vim).</li>
            <br/>
        </ol>
        <br/>
        <li><b>Extended regex mode:</b> <code>:%!sed -E 's/(foo)(bar)/\2\1/'</code></li>
        <br/>
    </ul>
    <br/>
    <li>Practical examples:</li>
    <br/>
    <table>
        <thead>
            <tr>
                <th>Description</th>
                <th>Command</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Filter current line through sed</td>
                <td><code>:.!sed 's/old/new/g'</code></td>
            </tr>
            <tr>
                <td>Filter visual selection</td>
                <td><code>:'&lt;,'&gt;!sed 's/old/new/g'</code></td>
            </tr>
            <tr>
                <td>Remove trailing whitespace</td>
                <td><code>:%!sed 's/[[:space:]]*$//'</code></td>
            </tr>
            <tr>
                <td>Number all lines</td>
                <td><code>:%!sed = | sed 'N;s/\n/\t/'</code></td>
            </tr>
            <tr>
                <td>Double-space document</td>
                <td><code>:%!sed G</code></td>
            </tr>
            <tr>
                <td>Delete HTML tags</td>
                <td><code>:%!sed 's/&lt;[^&gt;]*&gt;//g'</code></td>
            </tr>
            <tr>
                <td>Convert DOS to Unix line endings</td>
                <td><code>:%!sed 's/\r$//'</code></td>
            </tr>
            <tr>
                <td>Swap first two fields (CSV)</td>
                <td><code>:%!sed -E 's/([^,]*),([^,]*)/\2,\1/'</code></td>
            </tr>
        </tbody>
    </table>
    <br/>
    <li>When to use sed vs native Vim commands:</li>
    <br/>
    <table>
        <thead>
            <tr>
                <th>Use sed when...</th>
                <th>Use Vim's <code>:s</code> when...</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>You need a specific sed script you already have</td>
                <td>Doing interactive editing (faster, better undo)</td>
            </tr>
            <tr>
                <td>Using complex sed-specific features</td>
                <td>Performance matters (no process spawning)</td>
            </tr>
            <tr>
                <td>Piping through multiple filters</td>
                <td>Need Vim registers or expression evaluation</td>
            </tr>
            <tr>
                <td>Combining with other Unix tools</td>
                <td>Working with visual selections frequently</td>
            </tr>
            <tr>
                <td>Testing sed script for shell use</td>
                <td>General text editing (native Vim is superior)</td>
            </tr>
        </tbody>
    </table>
    <br/>
    <li>Combining sed with other filters:</li>
    <br/>
    <ul>
        <li><code>:%!sed 's/foo/bar/' | grep bar</code>: substitute then filter.</li>
        <br/>
        <li><code>:%!sort | sed 's/^/- /'</code>: sort lines, then add bullet.</li>
        <br/>
        <li><code>:%!sed 's/&lt;/\&amp;lt;/g; s/&gt;/\&amp;gt;/g'</code>: HTML escape.</li>
        <br/>
    </ul>
    <br/>
    <li><b>Important note:</b> In most cases, <span class="hl-red-fg"><b>native Vim commands are preferred</b></span> over external sed for better performance, undo granularity, and integration with Vim's features.</li>
    <br/>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3></h3>
<ol>
    <li></li>
    <br/>
    <li></li>
    <br/>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3></h3>
<ol>
    <li></li>
    <br/>
    <li></li>
    <br/>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3></h3>
<ol>
    <li></li>
    <br/>
    <li></li>
    <br/>
</ol>
<br/>
<!-- * * * * * * * * * * * * * * -->


<hr/>


