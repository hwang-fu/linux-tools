<!-- * * * * * * * * * * * * * * -->
<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>SSH</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.css">

    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-core.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"
            data-prismjs-autoloader-path="https://cdn.jsdelivr.net/npm/prismjs/components/"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/line-numbers/prism-line-numbers.min.js"></script>

<style>
    html {
        scroll-behavior: smooth;
    }

    .back-to-top {
        position: fixed;
        right: 20px;
        bottom: 20px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #333;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        text-decoration: none;
        font-size: 22px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        opacity: 0.75;
        transition: opacity 0.2s ease, transform 0.2s ease;
        z-index: 999;
    }

    .back-to-top:hover {
        opacity: 1;
        transform: translateY(-2px);
    }

    .nav-icon {
        width: 18px;
        height: 18px;
        object-fit: contain;
        vertical-align: middle;
        margin-left: 0.3rem;
    }

    table {
        border-collapse: collapse;
        width: 100%;
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", serif;
        font-size: 14px;
    }

    th {
        background-color: #f5f5f5;
        text-align: left;
        font-weight: 600;
    }

    th, td {
        border: 1px solid #ddd;
        padding: 8px 12px;
    }

    tr:nth-child(even) {
        background-color: #fafafa;
    }

    tr:hover {
        background-color: #f0f8ff;
    }

    .comment {
        color: grey;
    }

    .token.keyword {
        font-weight: 500;
    }

    .red-underline {
        text-decoration-line: underline;
        text-decoration-color: red;
        text-decoration-thickness: 2px;
        text-underline-offset: 2px;
    }

    body {
        font-family: "KaiTi", "楷体", "STKaiti", "Kaiti SC", serif;
        font-variant-ligatures: none;
    }

    ul > li {
        list-style-type: disc;
    }

    code {
        color: #24292e;
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: .375rem;
        padding: .15rem .35rem;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.875rem;
        line-height: 1.4;
    }

    pre {
        margin: 1rem 0;
        padding: .8rem 1rem;
        background-color: #f6f8fa;
        border: 1px solid #d0d7de;
        border-radius: .5rem;
        overflow: auto;
        tab-size: 4;
    }

    pre code {
        display: block;
        padding: 0;
        background: transparent;
        border: 0;
        color: #24292e;
        font-family: "FiraCode Nerd Font", ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
        font-size: 0.875rem;
        line-height: 1.5;
        white-space: pre;
    }
</style>
</head>
<!-- * * * * * * * * * * * * * * -->
<body>
<a href="#" class="back-to-top" aria-label="Back to top">
    &#8593;
</a>
<!-- * * * * * * * * * * * * * * -->


<!-- * * * * * * * * * * * * * * -->
<hr/>
<nav id="toc" style="margin-bottom: 2rem;">
    <ul style="line-height: 1.8;">
        <li><a href="#ssh-intro">Introduction</a></li>
        <li><a href="#ssh-options">Options</a></li>
        <li><a href="#ssh-keygen-intro">About <code>ssh-keygen</code></a></li>
        <li><a href="#ssh-authorized-keys">Multiple Public Keys</a></li>
        <li><a href="#ssh-config">How to Write a SSH Config File?</a></li>
        <li><a href="#ssh-rsync">Using <code>rsync</code> (Local &amp; over SSH)</a></li>
    </ul>
</nav>
<hr/>
<!-- * * * * * * * * * * * * * * -->


<!-- * * * * * * * * * * * * * * -->
<h3 id="ssh-intro">Introduction to SSH (Secure Shell)</h3>
<ol>

    <li><b>What Is SSH?</b></li>
    <ul>
        <br/>
        <li><b>SSH (Secure Shell)</b> is a cryptographic network protocol used to securely connect to remote computers.</li>
        <br/>
        <li>It allows you to:
            <ul>
                <li>log in to remote servers,</li>
                <li>run commands,</li>
                <li>transfer files,</li>
                <li>tunnel network traffic,</li>
                <li>and manage systems securely over an encrypted connection.</li>
            </ul>
        </li>
        <br/>
        <li>SSH replaces older insecure protocols such as <code>telnet</code> and <code>rsh</code>, which transmitted passwords in plain text.</li>
        <br/>
        <li>SSH is one of the most essential tools for developers, system administrators, DevOps engineers, and cloud users.</li>
    </ul>
    <br/><br/>


    <li><b>How SSH Works: A Simple Overview</b></li>
    <br/>
    <ul>
        <li>You usually authenticate using:
            <ul>
                <li><b>password</b> (less secure)</li>
                <li><b>SSH key pair</b> (much more secure)</li>
            </ul>
        </li>
        <br/>
        <li>The general connection flow:</li>
<pre><code class="language-plaintext line-numbers">Your Machine  → (encrypted tunnel) → Remote Server
</code></pre>
    </ul>

    <br/>
    <ul>
        <li>All communication goes through port <code>22</code> by default.</li>
    </ul>
    <br/><br/>


    <li><b>SSH Key Pairs</b></li>
    <ul>
        <br/>
        <li>SSH keys are the most secure way to authenticate.</li>
        <br/>
        <li>A key pair consists of:</li>
        <ul>
            <li><b>Private key</b> — stays on your machine and must never be shared.</li>
            <li><b>Public key</b> — stored on the remote server in <code>~/.ssh/authorized_keys</code>.</li>
        </ul>
        <br/>
        <li>To generate a key pair:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -t ed25519 -C "your_email@example.com"</code></pre>
    <ul>
        <li>This creates <code>id_ed25519</code> the private key and <code>id_ed25519.pub</code> the public key.</li>
        <li>For older systems, <code>-t rsa</code> may be used, but <code>ed25519</code> is recommended for better security and performance.</li>
    </ul>
    <br/><br/>


    <li><b>Connecting to a Remote Server</b></li>
    <br/>
    <ul>
        <li>Basic SSH command:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh username@hostname</code></pre>

    <br/>
    <ul>
        <li>Examples:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh ubuntu@54.23.11.222       # AWS EC2 instance
ssh user@myserver.com         # domain
ssh root@192.168.1.10         # LAN server</code></pre>

    <br/>
    <ul>
        <li>If your key is named something else:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh -i mykey.pem ubuntu@&lt;public-ip&gt;</code></pre>

    <br/>
    <ul>
        <li>If the server uses a non-default port:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh -p 2222 user@host</code></pre>

    <br/><br/>


    <li><b>First-Time Connection and Host Keys</b></li>
    <br/>
    <ul>
        <li>The first time you connect to a server, SSH shows a message:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">The authenticity of host 'example.com (54.x.x.x)' can't be established.
Are you sure you want to continue connecting (yes/no)?
</code></pre>

    <ul>
        <li>This is SSH verifying the server’s identity.</li>
        <li>It stores the server’s fingerprint in <code>~/.ssh/known_hosts</code>.</li>
        <li>Next time you connect, SSH will warn you if the fingerprint changes (which could indicate a security risk).</li>
    </ul>
    <br/><br/>


    <li><b>SSH Directory Layout</b></li>
    <br/>
    <ul>
        <li>Your local SSH configuration lives in <code>~/.ssh/</code>:</li>
    </ul>

<pre><code class="language-bash line-numbers">~/.ssh/
    id_ed25519           # private key
    id_ed25519.pub       # public key
    authorized_keys      # keys allowed to log in (on server)
    known_hosts          # server fingerprints
    config               # optional config file
</code></pre>

    <br/><br/>


    <li><b>SSH Config File (Simplifies Connections)</b></li>
    <br/>
    <ul>
        <li>You can create <code>~/.ssh/config</code> to store shortcuts and settings:</li>
    </ul>

<pre><code class="language-bash line-numbers">Host my-ec2
    HostName 54.23.11.222
    User ubuntu
    IdentityFile ~/.ssh/mykey.pem
    Port 22</code></pre>

    <br/>
    <ul>
        <li>Now connect with:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh my-ec2</code></pre>

    <br/>
    <ul>
        <li>This is extremely useful when working with many servers.</li>
    </ul>
    <br/><br/>


    <li>To Copy Files via SSH</li>
    <ul>
        <br/>
        <li>Use <code>scp</code> (Secure Copy) or <code>rsync</code> over SSH.</li>
    </ul>

    <br/>
    <ul><li>To Upload a file:</li></ul>

<pre><code class="language-bash line-numbers">scp file.txt user@host:/remote/path/</code></pre>

    <br/>
    <ul><li>To Download a file:</li></ul>

<pre><code class="language-bash line-numbers">scp user@host:/remote/path/file.txt ./</code></pre>

    <br/>
    <ul><li>To Copy a folder recursively:</li></ul>

<pre><code class="language-bash line-numbers">scp -r ./myfolder user@host:/var/www/</code></pre>

    <br/>
    <ul>
        <li><code>rsync</code> example (faster, syncs changes only):</li>
    </ul>

<pre><code class="language-bash line-numbers">rsync -avz ./site/ user@host:/var/www/site/</code></pre>

    <br/><br/>


    <li><b>Port Forwarding (Tunneling)</b></li>
    <br/>
    <ul>
        <li>SSH can forward ports to securely tunnel traffic.</li>
    </ul>

    <br/>
    <ul>
        <li><b>Local port forward</b> — access remote service through local port:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh -L 8080:localhost:3000 user@host</code></pre>

    <ul>
        <li>This forwards <code>localhost:8080</code> on your machine → <code>localhost:3000</code> on the remote server.</li>
        <li>Useful for:
            <ul>
                <li>remote development,</li>
                <li>databases,</li>
                <li>private web dashboards.</li>
            </ul>
        </li>
    </ul>

    <br/>
    <ul>
        <li><b>Reverse port forwarding</b>:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh -R 9000:localhost:3000 user@host</code></pre>

    <ul>
        <li>This allows a remote server to access a local port on your machine.</li>
    </ul>
    <br/><br/>


    <li><b>SSH Agent (Storing Keys Temporarily)</b></li>
    <br/>
    <ul>
        <li>The SSH agent holds private keys in memory so you don’t need to type your passphrase each time.</li>
    </ul>

<pre><code class="language-bash line-numbers">eval "$(ssh-agent)"
ssh-add ~/.ssh/id_ed25519</code></pre>

    <ul>
        <li>Once added, SSH can use the keys automatically.</li>
    </ul>
    <br/><br/>


    <li><b>Hardening SSH Security</b></li>
    <br/>
    <ul>
        <li>SSH is secure, but you can harden it further by:</li>
        <ul>
            <li>Disabling password login (use only keys)</li>
            <li>Changing SSH port</li>
            <li>Restricting users with <code>AllowUsers</code></li>
            <li>Using fail2ban to block repeated failures</li>
            <li>Enforcing firewall rules</li>
        </ul>
        <br/>
        <li>SSH server config file (on remote server): <code>/etc/ssh/sshd_config</code>.</li>
    </ul>
    <br/><br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="ssh-options">Common SSH Command Options</h3>
<ol>

    <li><b>Overview</b></li>
    <ul>
        <br/>
        <li>This chapter summarizes the most commonly used <code>ssh</code> client options.</li>
        <br/>
        <li>These options apply to the OpenSSH client (the one you normally use on Linux/macOS and WSL).</li>
    </ul>
    <br/><br/>


    <li><b>Basic Connection and Identity Options</b></li>
    <br/>
    <ul>
        <li>These options are most frequently used when connecting to a host.</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Option</th>
            <th>Description</th>
            <th>Example</th>
        </tr>

        <tr>
            <td><code>-p &lt;port&gt;</code></td>
            <td>Connect to the remote host on the specified TCP port (default is 22).</td>
            <td><code>ssh -p 2222 user@example.com</code></td>
        </tr>

        <tr>
            <td><code>-i &lt;identity_file&gt;</code></td>
            <td>Use this private key file for authentication (instead of the default <code>~/.ssh/id_*</code>).</td>
            <td><code>ssh -i ~/.ssh/mykey.pem ubuntu@host</code></td>
        </tr>

        <tr>
            <td><code>-l &lt;user&gt;</code></td>
            <td>Specify the remote login user (same as <code>user@host</code>).</td>
            <td><code>ssh -l ubuntu 1.2.3.4</code></td>
        </tr>

        <tr>
            <td><code>-F &lt;configfile&gt;</code></td>
            <td>Use an alternative SSH config file instead of <code>~/.ssh/config</code>.</td>
            <td><code>ssh -F ./ssh_config my-alias</code></td>
        </tr>

        <tr>
            <td><code>-4</code>, <code>-6</code></td>
            <td>Force use of IPv4 (<code>-4</code>) or IPv6 (<code>-6</code>).</td>
            <td><code>ssh -4 user@example.com</code></td>
        </tr>

        <tr>
            <td><code>-C</code></td>
            <td>Enable compression on the SSH connection (useful on slow links).</td>
            <td><code>ssh -C user@example.com</code></td>
        </tr>

        <tr>
            <td><code>-q</code></td>
            <td>Quiet mode: suppress most warnings and diagnostic messages.</td>
            <td><code>ssh -q user@example.com</code></td>
        </tr>
    </table>
    <br/><br/>


    <li><b>Authentication and Key Handling</b></li>
    <br/>
    <ul>
        <li>Options related to authentication behavior and keys.</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Option</th>
            <th>Description</th>
            <th>Example</th>
        </tr>

        <tr>
            <td><code>-i &lt;identity_file&gt;</code></td>
            <td>Use specified private key file (repeated here because it is so common).</td>
            <td><code>ssh -i ~/.ssh/id_ed25519 user@host</code></td>
        </tr>

        <tr>
            <td><code>-A</code></td>
            <td>Enable SSH agent forwarding (forward your local agent to the remote host).</td>
            <td><code>ssh -A user@jumphost</code></td>
        </tr>

        <tr>
            <td><code>-a</code></td>
            <td>Disable SSH agent forwarding (explicitly turn it off).</td>
            <td><code>ssh -a user@host</code></td>
        </tr>

        <tr>
            <td><code>-K</code></td>
            <td>Enable GSSAPI-based authentication (Kerberos etc.), if configured.</td>
            <td><code>ssh -K user@host</code></td>
        </tr>

        <tr>
            <td><code>-o PreferredAuthentications=&lt;methods&gt;</code></td>
            <td>Specify which authentication methods to try (e.g., <code>publickey,password</code>).</td>
            <td><code>ssh -o PreferredAuthentications=publickey user@host</code></td>
        </tr>

        <tr>
            <td><code>-o IdentitiesOnly=yes</code></td>
            <td>Use only the explicitly specified identities (not every key from the agent).</td>
            <td><code>ssh -i ~/.ssh/work_rsa -o IdentitiesOnly=yes user@host</code></td>
        </tr>
    </table>
    <br/><br/>


    <li><b>Host Key Checking and Security</b></li>
    <br/>
    <ul>
        <li>Options controlling how SSH verifies the server identity.</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Option</th>
            <th>Description</th>
            <th>Example</th>
        </tr>

        <tr>
            <td><code>-o StrictHostKeyChecking=yes|no|ask</code></td>
            <td>
                Control behavior when a host key changes or is unknown:<br/>
                <b>yes</b> = refuse; <b>no</b> = accept automatically; <b>ask</b> = prompt.
            </td>
            <td><code>ssh -o StrictHostKeyChecking=ask user@host</code></td>
        </tr>

        <tr>
            <td><code>-o UserKnownHostsFile=&lt;file&gt;</code></td>
            <td>Use a particular known-hosts file instead of <code>~/.ssh/known_hosts</code>.</td>
            <td><code>ssh -o UserKnownHostsFile=./known_hosts user@host</code></td>
        </tr>

        <tr>
            <td><code>-o VerifyHostKeyDNS=yes|no</code></td>
            <td>Check host keys via DNS (SSHFP records), if configured.</td>
            <td><code>ssh -o VerifyHostKeyDNS=yes user@host</code></td>
        </tr>

        <tr>
            <td><code>-o HostKeyAlgorithms=&lt;list&gt;</code></td>
            <td>Specify which host key algorithms to accept (useful when dealing with older servers).</td>
            <td><code>ssh -o HostKeyAlgorithms=ssh-ed25519 user@oldhost</code></td>
        </tr>
    </table>
    <br/><br/>


    <li><b>Port Forwarding and Tunneling</b></li>
    <br/>
    <ul>
        <li>These options are used to tunnel TCP traffic through an SSH connection.</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Option</th>
            <th>Description</th>
            <th>Example</th>
        </tr>

        <tr>
            <td><code>-L &lt;local_port&gt;:&lt;host&gt;:&lt;host_port&gt;</code></td>
            <td>
                Local port forward:<br/>
                listen on local port and forward to <code>host:host_port</code> from the remote side.
            </td>
            <td><code>ssh -L 8080:localhost:3000 user@server</code></td>
        </tr>

        <tr>
            <td><code>-R &lt;remote_port&gt;:&lt;host&gt;:&lt;host_port&gt;</code></td>
            <td>
                Remote port forward:<br/>
                listen on remote port and forward back to <code>host:host_port</code> on your local side.
            </td>
            <td><code>ssh -R 9000:localhost:3000 user@server</code></td>
        </tr>

        <tr>
            <td><code>-D &lt;local_port&gt;</code></td>
            <td>
                Dynamic port forwarding (SOCKS proxy) on the given local port.<br/>
                Useful for tunneling arbitrary traffic through SSH.
            </td>
            <td><code>ssh -D 1080 user@server</code></td>
        </tr>

        <tr>
            <td><code>-N</code></td>
            <td>Do not execute a remote command; only forward ports (no shell).</td>
            <td><code>ssh -N -L 5432:db.internal:5432 user@bastion</code></td>
        </tr>

        <tr>
            <td><code>-f</code></td>
            <td>Run SSH in the background (after asking for passwords / passphrases).</td>
            <td><code>ssh -f -N -L 8080:localhost:3000 user@server</code></td>
        </tr>

        <tr>
            <td><code>-g</code></td>
            <td>Allow remote hosts to connect to local forwarded ports (for <code>-L</code> / <code>-D</code>).</td>
            <td><code>ssh -g -L 8080:localhost:3000 user@server</code></td>
        </tr>
    </table>
    <br/><br/>


    <li><b>Jump Hosts and Proxies</b></li>
    <br/>
    <ul>
        <li>Options for connecting to a host via intermediate servers.</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Option</th>
            <th>Description</th>
            <th>Example</th>
        </tr>

        <tr>
            <td><code>-J &lt;user@jump&gt;[,&lt;user@jump2&gt;...]</code></td>
            <td>
                Use one or more jump hosts (proxy jumps).<br/>
                SSH will connect through these hosts to reach the final destination.
            </td>
            <td><code>ssh -J jumphost user@target</code></td>
        </tr>

        <tr>
            <td><code>-o ProxyCommand=&lt;command&gt;</code></td>
            <td>Use a custom command to connect to the server (legacy way to implement jump hosts).</td>
            <td><code>ssh -o ProxyCommand="ssh jumphost nc %h %p" user@target</code></td>
        </tr>

        <tr>
            <td><code>-o ProxyJump=&lt;host&gt;</code></td>
            <td>Same as <code>-J</code>, for use in config files.</td>
            <td><code>ssh -o ProxyJump=jumphost user@target</code></td>
        </tr>
    </table>
    <br/><br/>


    <li><b>X11 Forwarding and Terminal Behavior</b></li>
    <br/>
    <ul>
        <li>Options that affect how the terminal and graphical forwarding behave.</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Option</th>
            <th>Description</th>
            <th>Example</th>
        </tr>

        <tr>
            <td><code>-X</code></td>
            <td>Enable X11 forwarding (trusted or untrusted based on server config; sometimes restricted).</td>
            <td><code>ssh -X user@remote</code></td>
        </tr>

        <tr>
            <td><code>-Y</code></td>
            <td>Enable trusted X11 forwarding (less restricted, but requires caution).</td>
            <td><code>ssh -Y user@remote</code></td>
        </tr>

        <tr>
            <td><code>-t</code></td>
            <td>Force pseudo-tty allocation (useful when running interactive commands like <code>top</code> or <code>sudo</code>).</td>
            <td><code>ssh -t user@remote "sudo journalctl -f"</code></td>
        </tr>

        <tr>
            <td><code>-T</code></td>
            <td>Disable pseudo-tty allocation (never allocate a terminal).</td>
            <td><code>ssh -T git@github.com</code></td>
        </tr>
    </table>
    <br/><br/>


    <li><b>Debugging, Logging, and ControlMaster</b></li>
    <br/>
    <ul>
        <li>Options for seeing what SSH is doing and reusing connections.</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Option</th>
            <th>Description</th>
            <th>Example</th>
        </tr>

        <tr>
            <td><code>-v</code>, <code>-vv</code>, <code>-vvv</code></td>
            <td>
                Increase verbosity of logging (more <code>v</code> = more detailed).<br/>
                Useful for debugging handshake/auth problems.
            </td>
            <td><code>ssh -vv user@host</code></td>
        </tr>

        <tr>
            <td><code>-E &lt;logfile&gt;</code></td>
            <td>Append debug logs to the specified file.</td>
            <td><code>ssh -vvE ssh.log user@host</code></td>
        </tr>

        <tr>
            <td><code>-M</code></td>
            <td>Place the SSH connection into &quot;master&quot; mode for connection sharing (ControlMaster).</td>
            <td><code>ssh -M -S /tmp/ssh-sock user@host</code></td>
        </tr>

        <tr>
            <td><code>-S &lt;ctl_socket&gt;</code></td>
            <td>
                Specify the control socket path used for ControlMaster/ControlPath connections.<br/>
                Allows subsequent SSH calls to reuse the same TCP connection.
            </td>
            <td><code>ssh -S /tmp/ssh-sock user@host</code></td>
        </tr>

        <tr>
            <td><code>-O check|forward|exit</code></td>
            <td>
                Send control commands to an existing master connection (check status, request port forwarding, or close it).
            </td>
            <td><code>ssh -O check -S /tmp/ssh-sock user@host</code></td>
        </tr>
    </table>
    <br/><br/>


    <li><b>Generic</b> <code>-o</code> <b>Option (Config Key = Value)</b></li>
    <br/>
    <ul>
        <li><code>-o</code> lets you specify any SSH config directive on the command line. Common patterns:</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Example <code>-o</code> usage</th>
            <th>Meaning</th>
        </tr>

        <tr>
            <td><code>-o ConnectTimeout=5</code></td>
            <td>Fail if connection cannot be established within 5 seconds.</td>
        </tr>

        <tr>
            <td><code>-o ServerAliveInterval=30</code></td>
            <td>Send keepalive messages every 30 seconds to avoid idle disconnections.</td>
        </tr>

        <tr>
            <td><code>-o ServerAliveCountMax=3</code></td>
            <td>After 3 unanswered keepalives, SSH will terminate the connection.</td>
        </tr>

        <tr>
            <td><code>-o LogLevel=ERROR</code></td>
            <td>Show only error messages (less verbose than the default).</td>
        </tr>

        <tr>
            <td><code>-o Compression=yes</code></td>
            <td>Enable compression (same effect as <code>-C</code>).</td>
        </tr>
    </table>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="ssh-keygen-intro">Introduction to ssh-keygen</h3>
<ol>

    <li><b>What Is It?</b></li>
    <ul>
        <br/>
        <li><code>ssh-keygen</code> is the standard tool (from OpenSSH) for creating and managing SSH key pairs.</li>
        <br/>
        <li>It is used to:
            <ul>
                <li>generate new SSH keys,</li>
                <li>change key passphrases,</li>
                <li>convert keys to different formats,</li>
                <li>print public keys from private keys,</li>
                <li>manage host keys / known_hosts entries.</li>
            </ul>
        </li>
        <br/>
        <li>SSH keys are the recommended way to authenticate to remote servers instead of passwords.</li>
        <br/>
        <li>On Linux/macOS, <code>ssh-keygen</code> is usually installed by default together with <code>ssh</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Basic Usage: Generating a Key Pair</b></li>
    <br/>
    <ul>
        <li>The most common usage: generate a new key pair (private + public key):</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -t ed25519 -C "your_email@example.com"</code></pre>

    <ul>
        <br/>
        <li>Interactive steps:</li>
        <ul>
            <li><u>file path</u> – default is <code>~/.ssh/id_ed25519</code></li>
            <li><u>passphrase</u> – optional but highly recommended</li>
        </ul>
        <br/>
        <li>Result:</li>
        <ul>
            <li><code>~/.ssh/id_ed25519</code> → private key</li>
            <li><code>~/.ssh/id_ed25519.pub</code> → public key</li>
        </ul>
        <br/>
        <li>The public key is what you copy to remote servers (e.g., into <code>~/.ssh/authorized_keys</code>).</li>
    </ul>
    <br/><br/>


    <li><b>Key Types and Algorithms</b></li>
    <br/>
    <ul>
        <li>You choose the algorithm with <code>-t</code>:</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Type</th>
            <th>Option</th>
            <th>Notes</th>
        </tr>
        <tr>
            <td>Ed25519</td>
            <td><code>-t ed25519</code></td>
            <td>Modern, fast, short keys, recommended default if supported.</td>
        </tr>
        <tr>
            <td>RSA</td>
            <td><code>-t rsa</code></td>
            <td>Widely supported, use 3072 or 4096 bits for security.</td>
        </tr>
        <tr>
            <td>ECDSA</td>
            <td><code>-t ecdsa</code></td>
            <td>Elliptic curve, okay, but ed25519 is often preferred.</td>
        </tr>
        <tr>
            <td>DSA</td>
            <td><code>-t dsa</code></td>
            <td>Deprecated/insecure, do not use.</td>
        </tr>
    </table>

    <br/>
    <ul>
        <li>Example: strong RSA key:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -t rsa -b 4096 -C "your_email@example.com"</code></pre>

    <br/><br/>


    <li><b>Common Options (Quick Table)</b></li>
    <br/>
    <ul>
        <li>Most frequently used command-line flags:</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Option</th>
            <th>Meaning</th>
            <th>Example</th>
        </tr>

        <tr>
            <td><code>-t &lt;type&gt;</code></td>
            <td>Key type (rsa, ed25519, ecdsa, ...).</td>
            <td><code>ssh-keygen -t ed25519</code></td>
        </tr>

        <tr>
            <td><code>-b &lt;bits&gt;</code></td>
            <td>Key size (mainly for RSA).</td>
            <td><code>ssh-keygen -t rsa -b 4096</code></td>
        </tr>

        <tr>
            <td><code>-C &lt;comment&gt;</code></td>
            <td>Add a comment (often an email or label).</td>
            <td><code>ssh-keygen -C "laptop key"</code></td>
        </tr>

        <tr>
            <td><code>-f &lt;filename&gt;</code></td>
            <td>Specify output file (private key path).</td>
            <td><code>ssh-keygen -f ~/.ssh/myserver_ed25519</code></td>
        </tr>

        <tr>
            <td><code>-N &lt;passphrase&gt;</code></td>
            <td>Set passphrase non-interactively (be careful with shell history).</td>
            <td><code>ssh-keygen -N "mySecret" ...</code></td>
        </tr>

        <tr>
            <td><code>-p</code></td>
            <td>Change the passphrase of an existing key.</td>
            <td><code>ssh-keygen -p -f ~/.ssh/id_ed25519</code></td>
        </tr>

        <tr>
            <td><code>-y</code></td>
            <td>Read a private key and print the corresponding public key.</td>
            <td><code>ssh-keygen -y -f ~/.ssh/id_ed25519 &gt; id_ed25519.pub</code></td>
        </tr>

        <tr>
            <td><code>-l</code></td>
            <td>Show fingerprint of a key.</td>
            <td><code>ssh-keygen -l -f ~/.ssh/id_ed25519.pub</code></td>
        </tr>

        <tr>
            <td><code>-E &lt;hash&gt;</code></td>
            <td>Specify hash for fingerprints (e.g., <code>md5</code>, <code>sha256</code>).</td>
            <td><code>ssh-keygen -l -E sha256 -f id_ed25519.pub</code></td>
        </tr>
    </table>
    <br/><br/>


    <li><b>Default Locations and File Names</b></li>
    <br/>
    <ul>
        <li>By default, keys live under <code>~/.ssh/</code>:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">~/.ssh/
    id_ed25519        ← default ed25519 private key
    id_ed25519.pub    ← its public key
    id_rsa            ← default RSA private key
    id_rsa.pub        ← its public key
</code></pre>

    <ul>
        <br/>
        <li>You can have <u>multiple keys</u> for different purposes:</li>
        <ul>
            <li><code>~/.ssh/id_github</code></li>
            <li><code>~/.ssh/id_company</code></li>
            <li><code>~/.ssh/id_personal_server</code></li>
        </ul>
        <br/>
        <li>Use <code>-f</code> when generating to pick a non-default name:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -t ed25519 -f ~/.ssh/id_github -C "github key"</code></pre>

    <br/><br/>


    <li><b>Changing or Adding a Passphrase</b></li>
    <br/>
    <ul>
        <li>To <b>add</b> or <b>change</b> a passphrase on an existing key:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -p -f ~/.ssh/id_ed25519</code></pre>

    <ul>
        <li>Interactive steps:</li>
        <ul>
            <li>Enter old passphrase (if any).</li>
            <li>Enter new passphrase (or press Enter for empty, which is not recommended).</li>
        </ul>
        <li>This does <u>not</u> change the key itself, only how it is encrypted on disk.</li>
    </ul>
    <br/><br/>


    <li><b>Printing the Public Key from a Private Key</b> (<code>-y</code>)</li>
    <br/>
    <ul>
        <li>If you lost your <code>.pub</code> file but still have the private key, you can regenerate the public key:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -y -f ~/.ssh/id_ed25519 &gt; ~/.ssh/id_ed25519.pub</code></pre>

    <ul>
        <li><code>-y</code> reads the private key, extracts the matching public key, and prints it to stdout.</li>
    </ul>
    <br/><br/>


    <li><b>Checking Key Fingerprints</b> (<code>-l</code>, <code>-E</code>)</li>
    <br/>
    <ul>
        <li>Fingerprints help you verify that a key (or host) is the one you expect.</li>
        <li>Example:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -l -f ~/.ssh/id_ed25519.pub</code></pre>

    <ul>
        <li>Add <code>-E sha256</code> or <code>-E md5</code> to specify hash algorithm:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -l -E sha256 -f ~/.ssh/id_ed25519.pub</code></pre>

    <br/><br/>


    <li><b>Managing</b> <code>known_hosts</code> <b>Entries</b></li>
    <br/>
    <ul>
        <li><code>ssh-keygen</code> can also manipulate the <code>~/.ssh/known_hosts</code> file (where host keys are stored).</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Command</th>
            <th>Meaning</th>
        </tr>
        <tr>
            <td><code>ssh-keygen -F hostname</code></td>
            <td>Find and print host keys for <code>hostname</code> in <code>known_hosts</code>.</td>
        </tr>
        <tr>
            <td><code>ssh-keygen -R hostname</code></td>
            <td>Remove all keys for <code>hostname</code> from <code>known_hosts</code> (useful if the remote host changed its key).</td>
        </tr>
    </table>

    <br/>
    <ul>
        <li>Example: remove a stale known-host entry:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -R example.com</code></pre>

    <br/><br/>


    <li><b>Typical Real-World Workflows</b></li>
    <br/>
    <ul>
        <li><b>Generate a key and use it for GitHub</b>:</li>
    </ul>

<pre><code class="language-bash line-numbers"># 1) Generate key
ssh-keygen -t ed25519 -f ~/.ssh/id_github -C "github-email@example.com"

# 2) Print the public key
cat ~/.ssh/id_github.pub

# 3) Copy the printed key into GitHub &gt; Settings &gt; SSH and GPG keys

# 4) Use in SSH config
cat &gt;&gt; ~/.ssh/config &lt;&lt;EOF
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_github
EOF
</code></pre>

    <br/>

    <ul>
        <li><b>Generate a key for a specific server</b>:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-keygen -t ed25519 -f ~/.ssh/id_server -C "server key"

# copy public key to server (if ssh-copy-id is available)
ssh-copy-id -i ~/.ssh/id_server.pub user@server

# or manually:
cat ~/.ssh/id_server.pub  # copy this line
# then paste it into server's ~/.ssh/authorized_keys
</code></pre>

    <br/><br/>


    <li><b>Security Tips</b></li>
    <br/>
    <ul>
        <li>Always protect your <u>private</u> key with correct file permissions (should be readable only by you):</li>
    </ul>

<pre><code class="language-bash line-numbers">chmod 600 ~/.ssh/id_ed25519</code></pre>

    <ul>
        <li>Use a passphrase for keys on laptops or shared devices.</li>
        <li>Consider using an SSH agent (<code>ssh-agent</code> + <code>ssh-add</code>) to avoid entering the passphrase every time.</li>
        <li>Use modern key types (ed25519 or RSA 3072+/4096) rather than old ones (DSA).</li>
    </ul>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="ssh-authorized-keys">SSH authorized_keys and Multiple Public Keys</h3>
<ol>

    <li><b>What Is</b> <code>~/.ssh/authorized_keys</code><b>?</b></li>
    <br/>
    <ul>
        <li>On the <b>server</b>, each user can have a file <code>~/.ssh/authorized_keys</code>.</li>
        <br/>
        <li>This file tells the SSH daemon: &ldquo;These public keys are allowed to log in as this user.&rdquo;</li>
        <br/>
        <li>When you connect using a private key from your client:
            <ul>
                <li>The server checks whether the matching <b>public key</b> exists in <code>authorized_keys</code> for the target user.</li>
                <li>If there is a match and the signature is valid, login is allowed (subject to restrictions).</li>
            </ul>
        </li>
        <br/>
        <li>So, <code>authorized_keys</code> is basically the <b>allow list of public keys</b> for that Unix account.</li>
    </ul>
    <br/><br/>


    <li><b>Can It Contain Multiple Public Keys?</b></li>
    <br/>
    <ul>
        <li><b>Yes.</b> <code>~/.ssh/authorized_keys</code> can contain <b>many</b> public keys.</li>
        <br/>
        <li>The usual convention is:
            <ul>
                <li><b>one public key per line</b>,</li>
                <li>optionally followed by a comment (e.g. which machine or person it belongs to).</li>
            </ul>
        </li>
        <br/>
        <li>Example structure (conceptually):</li>
    </ul>

<pre><code class="language-plaintext line-numbers">ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIMyKeyForLaptop    laptop
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIAnotherKeyForPC   desktop
ssh-rsa     AAAAB3NzaC1yc2EAAAADAQABAAABAQDemoKey...   old-server
</code></pre>

    <ul>
        <li>Each line is an independent authorized key. Any matching private key from these lines can log in as this user.</li>
    </ul>
    <br/><br/>


    <li><b>Format of a Single Line in</b> <code>authorized_keys</code></li>
    <br/>
    <ul>
        <li>A typical line has this basic shape:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">&lt;key-type&gt; &lt;base64-key-data&gt; [&lt;comment&gt;]
</code></pre>

    <ul>
        <li>Examples:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIBlaBlaBla... my-laptop
ssh-rsa     AAAAB3NzaC1yc2EAAAADAQABAAABAQDemo... old-key
</code></pre>

    <ul>
        <li><code>&lt;key-type&gt;</code> could be:
            <ul>
                <li><code>ssh-ed25519</code></li>
                <li><code>ssh-rsa</code> (legacy)</li>
                <li><code>ecdsa-sha2-nistp256</code></li>
                <li>etc., depending on what your SSH version supports.</li>
            </ul>
        </li>
        <br/>
        <li><code>&lt;base64-key-data&gt;</code> is a long base64 string representing the public key.</li>
        <br/>
        <li><code>&lt;comment&gt;</code> is free text, commonly:
            <ul>
                <li>an email address,</li>
                <li>a hostname,</li>
                <li>or &ldquo;who/what this key belongs to&rdquo;.</li>
            </ul>
        </li>
        <br/>
        <li>For multiple keys, you just add another line with this format.</li>
    </ul>
    <br/><br/>


    <li><b>Adding Multiple Keys Manually</b></li>
    <br/>
    <ul>
        <li>Suppose you have two public key files on your client:
            <ul>
                <li><code>id_ed25519.pub</code> (laptop)</li>
                <li><code>work_ed25519.pub</code> (work machine)</li>
            </ul>
        </li>
        <br/>
        <li>On the server, you can append both to <code>authorized_keys</code>:</li>
    </ul>

<pre><code class="language-bash line-numbers">cat id_ed25519.pub &gt;&gt; ~/.ssh/authorized_keys
cat work_ed25519.pub &gt;&gt; ~/.ssh/authorized_keys
</code></pre>

    <ul>
        <li>After that, your <code>authorized_keys</code> might look like:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAALaptopKeyBase64... laptop
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAASomeWorkKeyBase64... work
</code></pre>

    <ul>
        <li>Either corresponding private key can now log in as this user.</li>
    </ul>
    <br/><br/>


    <li><b>Using</b> <code>ssh-copy-id</code> <b>to Add Keys</b></li>
    <br/>
    <ul>
        <li>On many systems, there is a convenience tool <code>ssh-copy-id</code>, which:
            <ul>
                <li>copies a local public key to the server,</li>
                <li>appends it to <code>~/.ssh/authorized_keys</code>,</li>
                <li>and fixes permissions if needed.</li>
            </ul>
        </li>
        <br/>
        <li>Basic usage:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh-copy-id -i ~/.ssh/id_ed25519.pub user@server
</code></pre>

    <ul>
        <li>If you run this multiple times with different keys, they will all be added as extra lines to <code>authorized_keys</code>.</li>
        <li>This is a safe and simple way to maintain multiple authorized keys.</li>
    </ul>
    <br/><br/>


    <li><b>Per-Key Restrictions and Options</b></li>
    <br/>
    <ul>
        <li>Lines in <code>authorized_keys</code> can optionally start with <b>options</b> that restrict what the key is allowed to do.</li>
        <br/>
        <li>General shape:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">&lt;options&gt; &lt;key-type&gt; &lt;base64-key&gt; &lt;comment&gt;
</code></pre>

    <ul>
        <li>Example: a key that can only run one specific command:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">command="/usr/local/bin/backup-script.sh" ssh-ed25519 AAAAC3Nz... backup-key
</code></pre>

    <ul>
        <li>Other common options:
            <ul>
                <li><code>from="1.2.3.4"</code> – allow only from certain IPs.</li>
                <li><code>no-port-forwarding</code></li>
                <li><code>no-X11-forwarding</code></li>
                <li><code>no-agent-forwarding</code></li>
                <li><code>permitopen="host:port"</code></li>
            </ul>
        </li>
        <br/>
        <li>Each line can have its own options, so some keys may be highly restricted while others are full-login keys.</li>
    </ul>
    <br/><br/>


    <li><b>How the Server Uses Multiple Keys</b></li>
    <br/>
    <ul>
        <li>When you connect with SSH:
            <ul>
                <li>Your client offers one or more public keys (based on your local config, agent, etc.).</li>
                <li>The server checks whether any of these appear in <code>authorized_keys</code> of the target user.</li>
                <li>If it finds a match, it challenges the client to prove it has the corresponding private key.</li>
                <li>If the cryptographic check succeeds and any per-key options are satisfied, you are logged in.</li>
            </ul>
        </li>
        <br/>
        <li>So with multiple keys:
            <ul>
                <li>You can log in from different machines with different private keys.</li>
                <li>You can gradually add new keys and later remove old ones by editing the file.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>File Permissions (Important!)</b></li>
    <br/>
    <ul>
        <li>SSH is strict about permissions. If they are too open, the server may ignore <code>authorized_keys</code>.</li>
        <br/>
        <li>Typical safe settings on the server:</li>
    </ul>

<pre><code class="language-bash line-numbers">chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
</code></pre>

    <ul>
        <li>If authentication suddenly stops working after you edit the file, check these permissions first.</li>
    </ul>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="ssh-config">How to Write a SSH Config File</h3>
<ol>

    <li>What Is <code>~/.ssh/config</code>?</li>
    <ul>
        <br/>
        <li>The SSH client can read settings from a configuration file, usually <code>~/.ssh/config</code> (user-level) or <code>/etc/ssh/ssh_config</code> (system-wide).</li>
        <br/>
        <li>With this file you can:
            <ul>
                <li>define <b>short aliases</b> for hosts (e.g. <code>ssh my-server</code>),</li>
                <li>set a <b>default user</b>, port, identity file, etc.,</li>
                <li>configure <b>jump hosts</b> (bastions),</li>
                <li>configure <b>port forwarding</b>, keep-alives, timeouts,</li>
                <li>apply options conditionally (with <code>Match</code>).</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>File Location and Basic Structure</b></li>
    <br/>
    <ul>
        <li>User config file path:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">~/.ssh/config
</code></pre>

    <br/>
    <ul>
        <li>Permissions should be restrictive (otherwise OpenSSH may ignore it):</li>
    </ul>

<pre><code class="language-bash line-numbers">chmod 600 ~/.ssh/config
</code></pre>

    <br/>
    <ul>
        <li>Basic structure is a series of <b>Host blocks</b>:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">Host ALIAS_OR_PATTERN
    Option1 value
    Option2 value
    ...
</code></pre>

    <br/>
    <ul>
        <li>Indentation is not required but strongly recommended for readability.</li>
        <li>Options inside a <code>Host</code> block apply only to matching hosts.</li>
    </ul>
    <br/><br/>


    <li><b>Minimal Working Example</b></li>
    <br/>
    <ul>
        <li>Example: define a simple shortcut to an SSH server:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">Host my-server
    HostName 203.0.113.42
    User ubuntu
    IdentityFile ~/.ssh/id_myserver
</code></pre>

    <br/>
    <ul>
        <li>Now you can connect with just:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh my-server
</code></pre>

    <br/>
    <ul>
        <li>Instead of:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh -i ~/.ssh/id_myserver ubuntu@203.0.113.42
</code></pre>
    <br/><br/>


    <li><b>Common SSH Config Directives</b></li>
    <br/>
    <ul>
        <li>Some of the most frequently used keywords in <code>ssh_config</code>:</li>
    </ul>
    <br/>

    <table>
        <tr>
            <th>Directive</th>
            <th>Meaning</th>
            <th>Example</th>
        </tr>

        <tr>
            <td><code>Host</code></td>
            <td>Start a block of settings for a host alias or pattern.</td>
            <td><code>Host my-server</code></td>
        </tr>

        <tr>
            <td><code>HostName</code></td>
            <td>Real DNS name or IP to connect to.</td>
            <td><code>HostName 203.0.113.42</code></td>
        </tr>

        <tr>
            <td><code>User</code></td>
            <td>Remote login user (same as <code>ssh user@host</code>).</td>
            <td><code>User ubuntu</code></td>
        </tr>

        <tr>
            <td><code>Port</code></td>
            <td>Port number (default 22).</td>
            <td><code>Port 2222</code></td>
        </tr>

        <tr>
            <td><code>IdentityFile</code></td>
            <td>Path to the private key to use.</td>
            <td><code>IdentityFile ~/.ssh/id_myserver</code></td>
        </tr>

        <tr>
            <td><code>IdentitiesOnly</code></td>
            <td>If <code>yes</code>, use only the keys listed here, not all from ssh-agent.</td>
            <td><code>IdentitiesOnly yes</code></td>
        </tr>

        <tr>
            <td><code>ForwardAgent</code></td>
            <td>Forward your local ssh-agent to the remote host (<code>yes</code>/<code>no</code>).</td>
            <td><code>ForwardAgent yes</code></td>
        </tr>

        <tr>
            <td><code>ProxyJump</code></td>
            <td>Jump host (bastion) for connecting to another host.</td>
            <td><code>ProxyJump bastion.example.com</code></td>
        </tr>

        <tr>
            <td><code>LocalForward</code></td>
            <td>Set up local port forwarding (<code>local_port host:host_port</code>).</td>
            <td><code>LocalForward 8080 localhost:3000</code></td>
        </tr>

        <tr>
            <td><code>RemoteForward</code></td>
            <td>Set up remote port forwarding.</td>
            <td><code>RemoteForward 9000 localhost:3000</code></td>
        </tr>

        <tr>
            <td><code>ServerAliveInterval</code></td>
            <td>Send keepalive every N seconds.</td>
            <td><code>ServerAliveInterval 30</code></td>
        </tr>

        <tr>
            <td><code>ServerAliveCountMax</code></td>
            <td>Number of unanswered keepalives allowed before disconnect.</td>
            <td><code>ServerAliveCountMax 3</code></td>
        </tr>

        <tr>
            <td><code>StrictHostKeyChecking</code></td>
            <td>How to handle unknown/changed host keys (<code>yes/no/ask</code>).</td>
            <td><code>StrictHostKeyChecking ask</code></td>
        </tr>
    </table>
    <br/><br/>


    <li><b>Multiple Hosts and Wildcards</b></li>
    <br/>
    <ul>
        <li>You can use patterns in <code>Host</code>:
            <ul>
                <li><code>*</code> matches any string</li>
                <li><code>?</code> matches any single character</li>
            </ul>
        </li>
        <li>Examples:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">Host github.com
    User git
    IdentityFile ~/.ssh/id_github

Host *.example.com
    User deploy
    IdentityFile ~/.ssh/id_company

Host *
    ServerAliveInterval 60
    ServerAliveCountMax 3
</code></pre>

    <ul>
        <li>Order matters: <b>the first matching Host block wins</b> for each option.</li>
        <li>So you typically put more specific <code>Host</code> entries <b>before</b> generic ones like <code>Host *</code>.</li>
    </ul>
    <br/><br/>


    <li><b>Practical Examples: GitHub, Personal Server, Jump Host</b></li>
    <br/>
    <ul>
        <li>Example config for some common real-world cases:</li>
    </ul>

<pre><code class="language-plaintext line-numbers"># 1) GitHub SSH
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_github
    IdentitiesOnly yes

# 2) Personal VPS
Host vps
    HostName 198.51.100.10
    User root
    Port 22
    IdentityFile ~/.ssh/id_vps
    IdentitiesOnly yes
    ServerAliveInterval 30
    ServerAliveCountMax 3

# 3) Internal server via jump host (bastion)
Host bastion
    HostName bastion.mycompany.com
    User ubuntu
    IdentityFile ~/.ssh/id_company

Host internal-app
    HostName internal.app.local
    User ubuntu
    ProxyJump bastion
    IdentityFile ~/.ssh/id_company
</code></pre>

    <br/>
    <ul>
        <li>Now you can simply run:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh github.com
ssh vps
ssh internal-app
</code></pre>
    <br/><br/>


    <li><b>Using</b> <code>Include</code> <b>to Split Configs</b></li>
    <br/>
    <ul>
        <li>If your config becomes large, you can split it into multiple files and include them.</li>
        <li>Directive: <code>Include path_or_pattern</code></li>
        <li>Example structure:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">~/.ssh/
    config
    config.d/
        github.conf
        work.conf
        personal.conf
</code></pre>

    <br/>
    <ul>
        <li>Main <code>~/.ssh/config</code>:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">Include ~/.ssh/config.d/*.conf

Host *
    ServerAliveInterval 60
    ServerAliveCountMax 3
</code></pre>

    <ul>
        <li>Each <code>*.conf</code> file can hold host blocks grouped by purpose (e.g., work vs personal).</li>
    </ul>
    <br/><br/>


    <li><b>Conditional Config with</b> <code>Match</code> <b>Blocks</b></li>
    <br/>
    <ul>
        <li><code>Match</code> allows conditional config based on:
            <ul>
                <li>user,</li>
                <li>host,</li>
                <li>address,</li>
                <li>originalhost,</li>
                <li>localaddress, etc.</li>
            </ul>
        </li>
        <li>Syntax:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">Match CONDITION1 CONDITION2 ...
    Option value
    ...
Match all
    # reset conditions
</code></pre>

    <br/>
    <ul>
        <li>Example: special options only when connecting from a specific local IP:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">Match host my-server localaddress 192.168.1.100
    Compression yes
    ServerAliveInterval 15

Match all
</code></pre>

    <br/>
    <ul>
        <li>Example: different identity for a specific user:</li>
    </ul>

<pre><code class="language-plaintext line-numbers">Match user deploy
    IdentitiesOnly yes
    IdentityFile ~/.ssh/id_deploy
</code></pre>

    <br/><br/>


    <li><b>Testing and Debugging Your Config</b></li>
    <br/>
    <ul>
        <li>If something doesn&apos;t behave as expected, you can print the fully resolved config:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh -G my-server
</code></pre>

    <br/>
    <ul>
        <li>Use verbose output to see which options are in effect and how SSH connects:</li>
    </ul>

<pre><code class="language-bash line-numbers">ssh -vvv my-server
</code></pre>

    <br/>
    <ul>
        <li>Common debugging tips:
            <ul>
                <li>Check file permissions on <code>~/.ssh</code> and its contents.</li>
                <li>Ensure you didn&apos;t accidentally put spaces instead of tabs in critical places (spaces are fine; just avoid weird characters).</li>
                <li>Remember: first matching <code>Host</code> entry for each setting wins.</li>
            </ul>
        </li>
    </ul>
    <br/><br/>


    <li><b>Security Considerations</b></li>
    <ul>
        <br/>
        <li>Keep your private keys safe:
            <ul>
                <li>Permissions: <code>chmod 600 ~/.ssh/id_*</code></li>
                <li>Use passphrases for important keys.</li>
            </ul>
        </li>
        <br/>
        <li>Be careful with:
            <ul>
                <li><code>ForwardAgent yes</code> (only enable when you trust the remote host).</li>
                <li><code>StrictHostKeyChecking no</code> (can open you to MITM attacks).</li>
            </ul>
        </li>
        <br/>
        <li>Use separate keys/config entries for different services (e.g., work vs personal) to limit damage if one key is compromised.</li>
    </ul>
    <br/><br/>
</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->
<h3 id="ssh-rsync">Using rsync (Local &amp; over SSH)</h3>
<ol>

    <li><b>What Is rsync?</b></li>
    <ul>
        <br/>
        <li><code>rsync</code> is a fast, incremental file-copying tool.</li>
        <br/>
        <li>It preserves permissions, ownership, timestamps, symlinks (with correct options).</li>
        <br/>
        <li>Works both:
            <ul>
                <li>locally (disk to disk / directory to directory)</li>
                <li>remotely over SSH (typical for backups &amp; deployments)</li>
            </ul>
        </li>
        <br/>
        <li>Basic pattern:
<pre><code class="language-bash line-numbers">rsync [OPTIONS] SOURCE DEST</code></pre>
        </li>
    </ul>
    <br/>
    <br/>


    <li>Key Options You Will Use All the Time</li>
    <br/>

    <table border="1" cellspacing="0" cellpadding="6">
        <thead>
            <tr>
                <th>Option</th>
                <th>Description</th>
                <th>Details</th>
            </tr>
        </thead>

        <tbody>

            <tr>
                <td><code>-a</code></td>
                <td>Archive mode (recommended default)</td>
                <td>
                    Preserves:<br/>
                    &nbsp;&nbsp;&bull; permissions<br/>
                    &nbsp;&nbsp;&bull; timestamps<br/>
                    &nbsp;&nbsp;&bull; symlinks<br/>
                    &nbsp;&nbsp;&bull; device files<br/>
                    &nbsp;&nbsp;&bull; recursive directories<br/><br/>
                    Equivalent to: <code>-rlptgoD</code>
                </td>
            </tr>

            <tr>
                <td><code>-v</code></td>
                <td>Verbose output</td>
                <td>Prints names of files being transferred.</td>
            </tr>

            <tr>
                <td><code>-z</code></td>
                <td>Compress data during transfer</td>
                <td>Improves transfer speed on slow networks.</td>
            </tr>

            <tr>
                <td><code>--delete</code></td>
                <td>Mirror deletions</td>
                <td>
                    Removes files on destination that no longer exist in source.<br/>
                    Useful for exact mirroring.<br/>
                    Always test with <code>--dry-run</code> first.
                </td>
            </tr>

            <tr>
                <td><code>--dry-run</code><br/><code>-n</code></td>
                <td>Simulation mode</td>
                <td>Shows what would change without making modifications.</td>
            </tr>

            <tr>
                <td><code>--progress</code></td>
                <td>Show per-file transfer progress</td>
                <td>Useful for large files, shows speed and ETA.</td>
            </tr>

            <tr>
                <td><code>-e ssh</code></td>
                <td>Use SSH as the remote shell</td>
                <td>
                    Usually optional, but needed for customizing SSH options (port, key file, etc.).
                </td>
            </tr>

        </tbody>
    </table>
    <br/>
    <br/>


    <li>Local Usage (Directory to Directory)</li>
    <br/>
    <ul>
        <li>Basic local sync:
<pre><code class="language-bash line-numbers">rsync -av source_dir/ backup_dir/</code></pre>
        </li>
        <li>Important: the meaning of the trailing slash:
            <ul>
                <li><code>source_dir/</code> &rarr; copy <u>contents of</u> <code>source_dir</code> into <code>backup_dir</code>.</li>
                <li><code>source_dir</code> (without slash) &rarr; copy the directory itself as a subdirectory.</li>
            </ul>
        </li>
        <br/>
        <li>Examples:</li>
        <br/>
        <ul>
            <li>Copy contents:
<pre><code class="language-bash line-numbers">rsync -av project/ /mnt/backup/project/</code></pre>
            </li>
            <li>Copy directory itself:
<pre><code class="language-bash line-numbers">rsync -av project /mnt/backup/</code></pre>
                Destination tree becomes: <code>/mnt/backup/project/...</code></li>
        </ul>
        <br/>
        <li>Dry run to inspect:
<pre><code class="language-bash line-numbers">rsync -av --dry-run project/ /mnt/backup/project/</code></pre>
        </li>
    </ul>
    <br/>
    <br/>


    <li>Basic Remote Usage over SSH</li>
    <br/>
    <ul>
        <li>General pattern (source local, dest remote):
<pre><code class="language-bash line-numbers">rsync -avz SOURCE/ user@remote.host:/path/to/dest/</code></pre>
        </li>
        <li>General pattern (source remote, dest local):
<pre><code class="language-bash line-numbers">rsync -avz user@remote.host:/path/to/src/ DEST/</code></pre>
        </li>
        <br/>
        <li>Example: upload local project to server:
<pre><code class="language-bash line-numbers">rsync -avz ./app/ user@example.com:/var/www/app/</code></pre>
        </li>
        <br/>
        <li>Example: download remote logs:
<pre><code class="language-bash line-numbers">rsync -avz user@example.com:/var/log/myapp/ ./logs/</code></pre>
        </li>
        <br/>
        <li>Using explicit SSH:
<pre><code class="language-bash line-numbers">rsync -avz -e ssh ./app/ user@example.com:/var/www/app/</code></pre>
        </li>
        <li>Customize SSH (port, identity file, etc.):</li>
        <br/>
        <ul>
            <li>Different port:
<pre><code class="language-bash line-numbers">rsync -avz -e &quot;ssh -p 2222&quot; ./app/ user@example.com:/var/www/app/</code></pre>
            </li>
            <li>Specific SSH key:
<pre><code class="language-bash line-numbers">rsync -avz -e &quot;ssh -i ~/.ssh/deploy_key&quot; ./app/ user@example.com:/var/www/app/</code></pre>
            </li>
        </ul>
    </ul>
    <br/>
    <br/>


    <li>Using rsync with SSH Config Aliases</li>
    <br/>
    <ul>
        <li>Configure <code>~/.ssh/config</code>:</li>
<pre><code class="language-bash line-numbers">Host myserver
    HostName example.com
    User deploy
    Port 2222
    IdentityFile ~/.ssh/deploy_key
</code></pre>
        <li>Then use simply:</li>
<pre><code class="language-bash line-numbers">rsync -avz ./app/ myserver:/var/www/app/</code></pre>
        <li>No need for <code>-e</code> then, because SSH picks up config for <code>myserver</code>.</li>
    </ul>
    <br/>
    <br/>


    <li>Common Patterns: Mirroring &amp; Backups</li>
    <br/>
    <ul>
        <li>Mirror local directory to remote (delete extras on remote):</li>
<pre><code class="language-bash line-numbers">rsync -avz --delete ./app/ myserver:/var/www/app/</code></pre>
        <ul>
            <li>This makes <code>/var/www/app</code> an exact mirror of <code>./app</code>.</li>
            <li>Files deleted locally will be deleted on remote.</li>
        </ul>
        <br/>
        <li>Safe first step: always start with a dry-run:</li>
<pre><code class="language-bash line-numbers">rsync -avz --delete --dry-run ./app/ myserver:/var/www/app/</code></pre>
        <br/>
        <li>Incremental backup to local external disk:</li>
<pre><code class="language-bash line-numbers">rsync -av --delete ~/Documents/ /mnt/backup/Documents/</code></pre>
        <br/>
        <li>Backup to remote server over SSH:</li>
<pre><code class="language-bash line-numbers">rsync -avz --delete ~/Documents/ backup@backup.example.com:/data/backup/junzhe-docs/</code></pre>
    </ul>
    <br/>
    <br/>


    <li>Excluding Files and Directories</li>
    <br/>
    <ul>
        <li>Use <code>--exclude</code> to skip certain paths:</li>
<pre><code class="language-bash line-numbers">rsync -avz \
  --exclude &quot;.git/&quot; \
  --exclude &quot;node_modules/&quot; \
  ./app/ myserver:/var/www/app/</code></pre>
        <br/>
        <li>Exclude patterns are matched against relative paths.</li>
        <li>You can store them in a file:</li>
<pre><code class="language-bash line-numbers"># exclude.txt
.git/
node_modules/
dist/
*.log
</code></pre>
        <li>Then:</li>
<pre><code class="language-bash line-numbers">rsync -avz --exclude-from=exclude.txt ./app/ myserver:/var/www/app/</code></pre>
    </ul>
    <br/>
    <br/>


    <li>Permissions, Ownership, and Timestamps</li>
    <br/>
    <ul>
        <li><code>-a</code> (archive) already includes:
            <ul>
                <li><code>-p</code> &rarr; preserve permissions</li>
                <li><code>-o</code> &rarr; preserve owner (needs root to work fully)</li>
                <li><code>-g</code> &rarr; preserve group</li>
                <li><code>-t</code> &rarr; preserve modification times</li>
            </ul>
        </li>
        <br/>
        <li>Extra options:</li>
        <ul>
            <li><code>-H</code> &rarr; preserve hard links</li>
            <li><code>-A</code> &rarr; preserve ACLs</li>
            <li><code>-X</code> &rarr; preserve extended attributes</li>
        </ul>
        <br/>
        <li>Example (for full system backup):</li>
<pre><code class="language-bash line-numbers">sudo rsync -aHAX --delete / /mnt/backup/rootfs/</code></pre>
    </ul>
    <br/>
    <br/>


    <li>Speed Tuning and Large Transfers</li>
    <br/>
    <ul>
        <li>Compression: <code>-z</code> helps on slow networks, but may be useless or harmful on fast LANs.</li>
        <br/>
        <li>Bandwidth limiting:</li>
        <ul>
            <br/>
            <li>To avoid saturating your connection:</li>
<pre><code class="language-bash line-numbers">rsync -avz --bwlimit=2000 ./app/ myserver:/var/www/app/</code></pre>
                (limit ~2000 KB/s)</li>
        </ul>
        <br/>
        <li>Partial transfers / resume:</li>
        <ul>
            <li><code>--partial</code> keeps partially transferred files.</li>
            <li><code>--partial --progress</code> is common for large files.</li>
        </ul>
    </ul>
    <br/>
    <br/>


    <li>Typical Real-World Workflows</li>
    <br/>
    <ul>
        <li>1. Deploying a web app:</li>
<pre><code class="language-bash line-numbers"># from local dev machine:
rsync -avz --delete                     \
    --exclude &quot;.git/&quot;         \
    --exclude &quot;node_modules/&quot; \
    ./app/ myserver:/var/www/app/</code></pre>
        <br/>

        <li>2. Home directory backup to a remote server:</li>
<pre><code class="language-bash line-numbers">rsync -avz --delete                     \
    --exclude &quot;.cache/&quot;       \
    --exclude &quot;Downloads/&quot;    \
    ~/ mybackup:/data/backups/junzhe-home/</code></pre>
        <br/>

        <li>3. Synchronize large data between two servers (run from your local machine):</li>
<pre><code class="language-bash line-numbers">rsync -avz              \
  user1@server1:/data/  \
  user2@server2:/mirror/data/</code></pre>
        <br/>

        <li>4. One-time huge file transfer with resume support:</li>
<pre><code class="language-bash line-numbers">rsync -avz --partial --progress \
  largefile.iso myserver:/data/</code></pre>
    </ul>
    <br/>

</ol>
<!-- * * * * * * * * * * * * * * -->


<hr/>


<!-- * * * * * * * * * * * * * * -->

<!-- * * * * * * * * * * * * * * -->


<hr/>
<!-- * * * * * * * * * * * * * * -->

<footer>
    <p>&copy; 2025 Hwangfucius. All rights reserved.</p>
</footer>
</body>
<!-- * * * * * * * * * * * * * * -->
</html>
<!-- * * * * * * * * * * * * * * -->
